!function(){function e(e){u=e.createElement("iframe"),u.style.display="none",e.documentElement.appendChild(u)}function t(e){if(v._messageHandler)throw new Error("JViewBridge.init called twice");v._messageHandler=e;var t=d;d=null;for(var n=0;n<t.length;n++)c(t[n])}function n(e,t){a({data:e},t)}function o(e,t){f[e]=t}function i(e,t,n){a({handlerName:e,data:t},n)}function a(e,t){if(t){var n="cb_"+w++ +"_"+(new Date).getTime();p[n]=t,e.callbackId=n}l.push(e),u.src=g+"://"+h}function r(){var e=JSON.stringify(l);l=[],u.src=g+"://return/_fetchQueue/"+encodeURIComponent(e)}function c(e){setTimeout(function(){var t,n=JSON.parse(e);if(n.responseId){if(t=p[n.responseId],!t)return;t(n.responseData),delete p[n.responseId]}else{if(n.callbackId){var o=n.callbackId;t=function(e){a({responseId:o,responseData:e})}}var i=v._messageHandler;n.handlerName&&(i=f[n.handlerName]);try{i(n.data,t)}catch(r){"undefined"!=typeof console&&console.log("JViewBridge: WARNING: javascript handler threw.",n,r)}}})}function s(e){console.log(e),d&&d.length>0?d.push(e):c(e)}if(!window.JViewBridge){var u,l=[],d=[],f={},g="jeaes",h="__QUEUE_MESSAGE__/",p={},w=1,v=window.JViewBridge={init:t,send:n,registerHandler:o,callHandler:i,_fetchQueue:r,_handleMessageFromNative:s},m=document;e(m);var S=m.createEvent("Events");S.initEvent("JViewBridgeReady"),S.bridge=v,m.dispatchEvent(S)}}(),function(){function e(e){n=e.createElement("iframe"),n.style.display="none",e.documentElement.appendChild(n)}function t(e,t,n){window.JViewBridge?window.JViewBridge.callHandler(e,t,n):document.addEventListener("JViewBridgeReady",function(){window.JViewBridge.callHandler(e,t,n)},!1)}if(!window.je){var n,o={formatDate:function(e,t){e=void 0==e?new Date:e,e="number"==typeof e?new Date(e):e,t=t||"yyyy-MM-dd HH:mm:ss";var n={y:e.getFullYear(),M:e.getMonth()+1,d:e.getDate(),q:Math.floor((e.getMonth()+3)/3),w:e.getDay(),H:e.getHours(),h:e.getHours()%12==0?12:e.getHours()%12,m:e.getMinutes(),s:e.getSeconds(),S:e.getMilliseconds()},o=["天","一","二","三","四","五","六"];for(var i in n)t=t.replace(new RegExp(i+"+","g"),function(e){var t=n[i]+"";if("w"==i)return(e.length>2?"星期":"周")+o[t];for(var a=0,r=t.length;a<e.length-r;a++)t="0"+t;return 1==e.length?t:t.substring(t.length-e.length)});return t},parseDate:function(e,t){t=t||"yyyy-MM-dd";var n={y:0,M:1,d:0,H:0,h:0,m:0,s:0,S:0};t.replace(/([^yMdHmsS]*?)(([yMdHmsS])\3*)([^yMdHmsS]*?)/g,function(t,o,i,a,r){return e=e.replace(new RegExp(o+"(\\d{"+i.length+"})"+r),function(e,t){return n[a]=parseInt(t),""}),""}),n.M--;var o=new Date(n.y,n.M,n.d,n.H,n.m,n.s);return 0!==n.S&&o.setMilliseconds(n.S),o},formatDateToFriendly:function(e){e=e||new Date,e="number"==typeof e?new Date(e):e;var t=new Date;if(t.getTime()-e.getTime()<6e4)return"刚刚";var n=this.formatDate(e,"yyyy年M月d");return n==this.formatDate(t,"yyyy年M月d")?this.formatDate(e,"HH:mm"):e.getFullYear()==t.getFullYear()?this.formatDate(e,"M月d日"):n},formatDurationToFriendly:function(e){return 60>e?e+"秒":3600>e?(e-e%60)/60+"分"+e%60+"秒":86400>e?(e-e%3600)/60/60+"小时"+Math.round(e%3600/60)+"分":(e/60/60/24).toFixed(1)+"天"},formatTimeToFriendly:function(e){var t=Math.floor(e/60);t=10>t?"0"+t:t;var n=e%60;return n=10>n?"0"+n:n,t+":"+n},isLeapYear:function(e){return void 0===e&&(e=new Date),e instanceof Date&&(e=e.getFullYear()),e%4==0&&e%100!=0||e%400==0},getMonthDays:function(e,t){var n,o;void 0==e&&(e=new Date),e instanceof Date?(n=e.getFullYear(),o=e.getMonth()):"number"==typeof e&&(n=e,o=t-1);var i=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==o&&this.isLeapYear(n)?i[o]+1:i[o]},countDays:function(e,t){var n="yyyy-MM-dd";return e instanceof Date&&t instanceof Date&&(e=this.format(n,e),t=this.format(n,t)),"string"==typeof e&&"string"==typeof t?(e=this.parse(e,n),t=this.parse(t,n),(e.getTime()-t.getTime())/864e5):(console.error("参数格式无效！"),0)},getTimestamp:function(e){var t=Date.parse(e);return t/=1e3}},i={weChatLogin:function(e,n){t("weChatLogin",e,n)},weiBoLogin:function(e,n){t("weiBoLogin",e,n)},wxShareCollection:function(e,n){t("wxShareCollection",e,n)},weiBoShare:function(e,n){t("weiBoShare",e,n)}},a={disableScreenshots:function(e){t("disableScreenshots",{},e)},allowScreenshots:function(e){t("allowScreenshots",{},e)},openNativeView:function(e,n){t("openNativeView",e,n)},showNativeTitleBar:function(e,n){t("showNativeTitleBar",e,n)},hideNativeTitleBar:function(e,n){t("hideNativeTitleBar",e,n)},setNativeTitle:function(e,n){t("setNativeTitle",e,n)},setNativeTitleBackgroundColor:function(e,n){t("setNativeTitleBackgroundColor",e,n)},setNativeTitleColor:function(e,n){t("setNativeTitleColor",e,n)},openPopWindow:function(e,n){t("openPopWindow",e,n)},colsePopWindow:function(e,n){t("colsePopWindow",e,n)},showNotify:function(e,n){t("showNotify",e,n)}},r={scanCode:function(e){t("scanCode",{},e)},makePhoneCall:function(e,n){t("makePhoneCall",e,n)},setScreenBrightness:function(e,n){t("setScreenBrightness",e,n)},getScreenBrightness:function(e){t("getScreenBrightness",{},e)},setKeepScreenOn:function(e,n){t("setKeepScreenOn",e,n)},onUserCaptureScreen:function(e,n){t("onUserCaptureScreen",e,n)},vibrateLong:function(e){t("vibrateLong",{},e)},vibrateShort:function(e){t("vibrateShort",{},e)},addPhoneContact:function(e,n){t("addPhoneContact",e,n)},addCalendarEvent:function(e,n){t("addCalendarEvent",e,n)},sendSMS:function(e,n){t("sendSMS",e,n)},setClipboardData:function(e,n){t("setClipboardData",e,n)},getClipboardData:function(e,n){t("getClipboardData",e,n)},getSystemInfo:function(e){t("getSystemInfo",{},e)}},c={chooseImage:function(e,n){t("chooseImage",e,n)},previewImage:function(e,n){t("previewImage",e,n)},saveImageToPhotosAlbum:function(e,n){t("saveImageToPhotosAlbum",e,n)},imageToBase64:function(e,n){t("imageToBase64",e,n)},startRecord:function(e,n){t("startRecord",e,n)},stopRecord:function(e,n){t("stopRecord",e,n)},cancelRecord:function(e,n){t("cancelRecord",e,n)}},s={setStorage:function(e,n){t("setStorage",e,n)},getStorage:function(e,n){t("getStorage",e,n)},getStorageInfo:function(e,n){t("getStorageInfo",e,n)},removeStorage:function(e,n){t("removeStorage",e,n)},clearStorage:function(e,n){t("clearStorage",e,n)}},u={bluetoothStatus:function(e){t("bluetoothStatus",{},e)},openBlueTooth:function(e){t("openBlueTooth",{},e)},closeBlueTooth:function(e){t("closeBlueTooth",{},e)},searchDevices:function(e){t("searchDevices",{},e)},stopSearchDevices:function(e){t("stopSearchDevices",{},e)},getPairedDevices:function(e){t("getPairedDevices",{},e)}},l={getNetworkType:function(e){t("getNetworkType",{},e)},onNetworkStatusChange:function(e){t("onNetworkStatusChange",{},e)},getNetworkType:function(e){t("getNetworkType",{},e)},getNetworkType:function(e){t("getNetworkType",{},e)},request:function(e,n){t("request",e,n)},uploadFile:function(e,n){t("uploadFile",e,n)},downloadFile:function(e,n){t("downloadFile",e,n)}},d={connectSocket:function(e,n){t("connectSocket",e,n)},onSocketOpen:function(e){t("onSocketOpen",{},e)},onSocketError:function(e){t("onSocketError",{},e)},onSocketMessage:function(e){t("onSocketMessage",{},e)},onSocketClose:function(e){t("onSocketClose",{},e)},sendSocketMessage:function(e,n){t("sendSocketMessage",e,n)},closeSocket:function(e){t("closeSocket",{},e)}},f={getLocation:function(e){t("getLocation",{},e)}},g={updateApplication:function(e,n){t("updateApplication",e,n)},updateAssets:function(e,n){t("updateAssets",e,n)}},h=window.je={UI:a,OpenAPI:i,Device:r,Media:c,Data:s,BlueTooth:u,Network:l,WebSocket:d,Location:f,Utils:o,Application:g},p=document;e(p);var w=p.createEvent("Events");w.initEvent("jeReady"),w.bridge=h,p.dispatchEvent(w)}}();